<!DOCTYPE HTML>
<html lang="en">
<head>
    <meta charset=utf-8>
    <title>Canvas Floodfill Example</title>
    <script type="text/javascript" src="canvas_floodfill_v1.0.1.js"></script>
</head>
<body>
    <canvas id="fl_canvas" width="1000" height="1000" style="border: 1px solid black;"></canvas>
    <script type="text/javascript">
       
        canvas = document.getElementById("fl_canvas");
        context = canvas.getContext("2d");
        context.fillStyle = '#FDDDFF';
        context.strokeStyle = '#000000';
        // this causes it to turn all the white pixels black even outside the shape
        //context.fillRect(0, 0, canvas.width, canvas.height); 
        
        // rect
        /*context.rect(40,40,150,100);
        context.fill();
        context.stroke();*/

        // triangle
        numCopies = 0;
        shift = 0;
        start = {x: 35, y: 10};
        leftLeg = { x: 10, y: 50};
        rightLeg = { x: 60, y: 50};
        interval = 500;

       // drawTriangles = setInterval(function(){
            // loop once every 500ms until there are 5
            //if (numCopies < 8){
                //shift = numCopies * 20; // fib
                start.x = start.x + shift;
                leftLeg.x = leftLeg.x + shift;
                rightLeg.x = rightLeg.x + shift;

                context.beginPath();
                context.lineTo( start.x, start.y , leftLeg.x, leftLeg.y);
                context.lineTo( leftLeg.x, leftLeg.y, rightLeg.x, rightLeg.y);
                context.lineTo(rightLeg.x, rightLeg.y , start.x, start.y);
                context.closePath();
                context.stroke();
                context.fill();
                //numCopies++;
            //}
           // else {
                //console.log('clear');
                //clearInterval(drawTriangles);
                /*shift = 0; // fib
                erase = setInterval(function (argument) {
                    if (numCopies >= 0){
                        start.x = start.x - shift;
                        leftLeg.x = leftLeg.x - shift;
                        rightLeg.x = rightLeg.x - shift;
                        context.fillStyle = 'white';
                        context.strokeStyle = 'white';
                        context.beginPath();
                        context.lineTo( start.x, start.y , leftLeg.x, leftLeg.y);
                        context.lineTo( leftLeg.x, leftLeg.y, rightLeg.x, rightLeg.y);
                        context.lineTo(rightLeg.x, rightLeg.y , start.x, start.y);
                        context.closePath();
                        context.stroke();
                        context.fill();
                        numCopies--;
                        shift = 20;
                    } else clearInterval(erase);
                }, 300);*/
            //}
       // }, interval);
        

        canvas.onclick = function(e){
            console.log('filling');
            e = e || event;
            // adjust position based on the offset of the canvas element in relation to the top left corner of the page
            var offset = this.getBoundingClientRect(); 
            var mouseX = e.pageX - offset.left;
            var mouseY = e.pageY - offset.top;
            console.log(mouseX, mouseY);
            floodFill(mouseX, mouseY, context, '#000000', 20);
        }
       
    </script>
    
</body>
</html>